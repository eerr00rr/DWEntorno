<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Solució Exercici 2</title>
    <script type="text/javascript">

    // Definición de la clase Cliente
    class Cliente {

        #nombre;
        #direccion;
        #telefono;
        #nif;

        constructor(nombre, direccion, telefono, nif) {
            this.#nombre = nombre;
            this.#direccion = direccion;
            this.#telefono = telefono;
            this.#nif = nif;
        }
    }

    // Definición de la clase Elemento
    class Elemento {

        #descripcion
        #cantidad
        #precio

        getPrecio = function() {
            return this.#precio;
        }

        getCantidad = function() {
            return this.#cantidad;
        }

        constructor(descripcion, cantidad, precio) {
            this.#descripcion = descripcion;
            this.#cantidad = cantidad;
            this.#precio = precio;
        }
    }

    // Definición de la clase Factura
    class Factura {

        #baseImponible=0;
        #total=0;

        #cliente;
        #elementos;

        #empresa;
        #informacion;

        getEmpresa = function() {
            return this.#empresa;
        }

        getInformacion = function() {
            return this.#informacion;
        }

        setEmpresa = function(value) {
            this.#empresa = value;
        }

        setInformacion = function(value) {
            this.#informacion = value;
        }

        constructor(cliente, elementos) {
            this.#cliente = cliente;
            this.#elementos = elementos;

            this.#informacion = {
                "iva":21,
                "formaPago":"contado" };

            this.#empresa = {
                "nombre":"Nombre de la empresa",
                "direccion": "Direccion de la empresa",
                "telefono": "900900900",
                "nif":"XXXXXXXX" };
            }

        // Métodos añadidos al prototype de la Factura
        #calculaTotal = function() {

            for(var i=0; i<this.#elementos.length; i++) {               

                this.#baseImponible += this.#elementos[i].getCantidad() * this.#elementos[i].getPrecio();
            }
            this.#total = this.#baseImponible * this.#informacion.iva;
        }

        muestraTotal = function() {
            this.#calculaTotal();
            alert("TOTAL = " + this.#total + " euros");
        }

    };

    // Creación de una factura
    var elCliente = new Cliente("Cliente 1", "", "", "");
    var losElementos = [
        new Elemento("elemento1", 1, 5),
        new Elemento("elemento2", 2, 12),
        new Elemento("elemento3", 3, 42) 
    ];

    var laFactura = new Factura(elCliente, losElementos);
    laFactura.muestraTotal();
</script>
</head>
<body>
</body>
</html>